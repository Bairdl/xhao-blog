+++
date = '2025-10-06T00:56:07+08:00'
draft = false
title = 'SLG游戏网关概要'
+++

# SLG 游戏网关概要

网关，是客户端与服务器中间的第一层接入点。其主要职责有：
- 连接接入和连接生命周期管理。
  - 接受客户端的连接请求。
  - 维护每个连接的在线状态。
  - 处理连接的建立、断开、异常掉线。
  - 支持客户端重连时识别为同一会话（基于TOKEN）。
- 身份验证。
  - 验证玩家登录凭证（如临时TOKEN 或者 Session Key）。
  - 验证成功后，绑定连接与玩家身份（将PlayerId 与 ServiceId 绑定）。
- 请求路由。
  - 解析客户端发送的指令类型。
  - 根据指令类型，将请求分发给对应的游戏逻辑模块。
  - 不处理业务逻辑，只做路由转发。
- 上下文补充（上下文传递）。
  - 在转发请求时，自动添加一些上下文信息，如玩家ID、服务ID、网关ID、请求时间等。
  - 添加这些信息后，将请求转发给对应的游戏逻辑模块。
- 响应返回。
  - 接收业务模块的处理结果。
  - 将结果返回给对应的客户端连接。
- 服务端主动推送。
  - 支持业务模块主动向客户端发送消息，例如：
    - 部队到达通知。
    - 被其他玩家攻击通知。
    - 邮件到达。
  - 需要区分玩家是否在线：
    - 在线：直接发送。
    - 不在线：缓存。
- 协议编解码支持。
  - 支持客户端与服务端之间的序列化和反序列化，例如：
    - JSON。
    - Protobuf。
    - 自定义协议等。


