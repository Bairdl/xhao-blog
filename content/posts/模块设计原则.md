+++
date = '2025-09-24T23:39:20+08:00'
draft = false
title = '模块设计原则'
+++

# 模块设计

## 设计原则

### SOLID

- 单一职责
- 开闭原则
- 里式替换
- 接口隔离
- 依赖倒置

### DRY

- 避免重复：提取公共函数、常量、配置文件、工具类等等。

### KISS

- 保持简单、愚蠢：使用最简单、最直接的方式解决问题，避免过度设计。

### YAGNI

- 不要过度设计：不要为 “将来可以需要” 的功能提前编写 **复杂** 的代码
- 先实现当前需求，当需要到来时，则通过重构扩展。

### 组合优于继承

继承的带来了紧密的耦合，难以修改和维护代码。

将继承修改为组合：
1. 将原本由子类实现的特定步骤部分，抽离成单独的策略。
2. 将父类的通用模式作为上下文，将子类作为不同的策略替换进去。

## 编码

编码前思考以下问题：
- 功能的真正需求：提前和策划确认，区分 “当前需求” 和 “将来需求”。
- 如何分解功能：识别不同的关注点（关注点取决于设计视角和抽象层次），设计模块的边界（模块的具体职责）。
- 关键的抽象：区分业务流程中稳定的部分和可变的部分。为可变部分设计接口，并确保核心业务逻辑不会依赖于具体实现（具体实现是怎么做的细节。如果一个具体实现可能变化或者涉及到外部依赖，就需要添加接口。）。
- 数据流动：分析数据流动，可以画简单的流程图或序列图。
- 提前思考怎么测试：留出测试点，可以更好的分割函数。

编码后需要思考：
- 函数或者类是否只实现了一个职责。
- 名称是否足够清晰。
- 注释是否是为什么，而不是做什么。
- 是否有重复代码。
- 是否依赖了具体实现。


## 注释

注释解释 **为什么**， 而不是做什么。

